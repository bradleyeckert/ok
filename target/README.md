# H753 sample implementation

The STM32CubeIDE (Eclipse) project in the H753 folder runs on a [NUCLEO-H753ZI](https://www.st.com/en/evaluation-tools/nucleo-h753zi.html).

## compiling

Install the STM32Cube tools (MX, IDE, and Prog) on your PC. 

For development, the SDK consists of three apps to download and install:

- [STM32CubeMX](https://www.st.com/content/st_com/en/stm32cubemx.html), a configurator tool for generating startup code.
- [STM32CubeIDE](https://www.st.com/content/st_com/en/stm32cubeide.html), a bloated EclipseÂ® C IDE.
- [STM32CubeProgrammer](https://www.st.com/en/development-tools/stm32cubeprog.html), a very nice programming tool. Supports firmware encryption.

Import the project into the IDE's workspace and Build it.
Turn on the "binary output" option of you like to program by DFU drag-and-drop.

## running

Once it is running, you can use `ok` to connect to it. In ok's console,

`com-list` lists the serial ports in the system  
`port!` word sets the port. `17 port!` for example.
`remote` tries to connect to the target using the current port.  
`local` connects to ok's internal VM and closes the serial port.

## How'd we do?

`mips` measures the speed of the VM. On the STM32H753 with a 400 MHz system clock, it reads:

- 1.14 MIPS with Icache and Dcache disabled
- 4.95 MIPS with Icache and Dcache enabled

The VM is ~250 lines of C, which could be replaced by assembly to get get more MIPS.

The binary image programmed into the NUCLEO-H753ZI is about 25KB.
That includes initialization code generated by MX, the BCI (thin client),
serial port encryption and authentication, and the VM.
