# H753 sample implementation

The STM32CubeIDE (Eclipse) project in the H753 folder runs on a [NUCLEO-H753ZI](https://www.st.com/en/evaluation-tools/nucleo-h753zi.html).

## compiling

Install the STM32Cube tools (MX, IDE, and Prog) on your PC. MX and IDE will want a decent computer.
Import the project into the IDE's workspace and Build it.
Turn on the "binary output" option of you like to program by DFU drag-and-drop.

## running

Once it is running, you can use `ok` to connect to it. In ok's console,

`com-list` lists the serial ports in the system  
`port!` word sets the port. `17 port!` for example.
`remote` tries to connect to the target using the current port.  
`local` connects to ok's internal VM and closes the serial port.

## How'd we do?

`mips` measures the speed of the VM. On the STM32H753 with a 400 MHz system clock, it reads:

- 1.14 MIPS with Icache and Dcache disabled
- 4.95 MIPS with Icache and Dcache enabled

On a $140 GMKtec NucBox G5 Mini PC (If you have the means, I highly recommend picking one up),
the VM runs at 65 MIPs. The Intel Alder Lake N97 runs at up to 3.6GHz,
so perhaps that is 55 clocks per instruction.
The STM32H753 is 81 clocks per instruction.

The VM is ~250 lines of C, which could be replaced by assembly to get get more MIPS.

The binary image programmed into the NUCLEO-H753ZI is about 25KB.
That includes initialization code generated by MX, the BCI (thin client),
serial port encryption and authentication, and the VM.
